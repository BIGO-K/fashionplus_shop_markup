<!DOCTYPE html>
<html lang="ko" class="__layout_popup__">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="format-detection" content="telephone=no, address=no, email=no">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">

	<!-- 소셜태그 -->
	<meta property="og:title" content="">
	<meta property="og:description" content="">
	<meta property="og:image" content="">
	<meta property="og:url" content="">
	<meta property="og:site_name" content="">
	<!--// 소셜태그 -->

	<title>(팝업) 간편결제 비밀번호 설정 - 패션플러스</title>

	<!-- 공통 css -->
	<link rel="stylesheet" href="../css/font.css">
	<link rel="stylesheet" href="../css/app.css">

	<!-- (D) 폴리필/라이브러리는 요청을 줄이기 위해 combind + minify를 적용해주세요. -->
	<!-- 폴리필/라이브러리 스크립트 -->
	<script src="../../assets/js/polyfill/babel-polyfill-7.8.7.min.js"></script>
	<script src="../../assets/js/polyfill/dom4-2.1.5.min.js"></script>
	<script src="../../assets/js/polyfill/fetch.umd-3.0.0.min.js"></script>
	<script src="../../assets/js/polyfill/intersection-observer-0.8.0.min.js"></script>
	<script src="../../assets/js/polyfill/resize-observer-1.5.1.min.js"></script>
	<script src="../../assets/js/lib/lodash-4.17.15.min.js"></script>
	<script src="../../assets/js/lib/gsap-3.2.6/gsap.min.js"></script>
	<script src="../../assets/js/lib/axios-0.19.2.min.js"></script>
	<script src="../../assets/js/lib/load-image.all-3.0.0.min.js"></script>
	<script src="../../assets/js/lib/sortable-1.10.2.min.js"></script>

	<!-- 공통 스크립트 -->
	<script src="../js/app_common.js"></script>
	<script src="../js/app_page-common.js"></script>

	<!-- (D) 페이지 전용 스크립트는 .mm_page-content 하단에 넣어주세요. -->
</head>
<body>
	<div id="mm_app" class="mm_app">
		<!-- 스킵 -->
		<nav class="mm_skip">
			<ul>
				<li><a href="#mm_body" data-href="{ '_type': 'anchor' }">본문바로가기</a></li>
			</ul>
		</nav>
		<!-- 스킵 -->

		<!-- 화면 -->
		<div class="mm_view">
			<!-- 헤더 -->
			<header class="mm_header">
				<h1><b>간편결제 비밀번호 설정</b></h1>
				<div class="mm_lside">
					<a class="btn_back" href="#" data-href="{ '_type': 'back' }"><i class="mco_history-back"></i><b class="mm_ir-blind">이전으로</b></a>
				</div>
				<div class="mm_rside">
					<button type="button" class="btn_popup-close" onclick="mm.popup.close();"><i class="mco_popup-close"></i><b class="mm_ir-blind">팝업 닫기</b></button>
				</div>
			</header>
			<!--// 헤더 -->

			<!-- 내용 -->
			<div id="mm_body" class="mm_page">
				<!-- (D) 실제 내용을 추가하는 부분입니다. -->

				<!-- (D) 팝업은 html 요소에 '__layout_popup__' 클래스를 추가합니다. -->
				<div class="mm_scroller">
					<div class="mm_page-inner">
						<!-- 본문 -->
						<div class="mm_page-content m_popup-myeasy-password">
							<section>
								<h3><b>비밀번호 입력</b></h3>
								<div class="m__password-number">
									<ul>
										<li></li>
										<li></li>
										<li></li>
										<li></li>
										<li></li>
										<li></li>
									</ul>
									<input hidden>
								</div>
							</section>

							<!-- 비밀번호 키패드 -->
							<div class="m__password-key">
								<ul>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
									<li><button type="button"><b></b></button></li>
								</ul>
								<div class="mm_flex __flex_equal__">
									<button type="button" class="btn_remove-all"><b>전체삭제</b></button>
									<button type="button" class="btn_remove"><i class="mco_remove"></i><b class="mm_ir-blind">지우기</b></button>
								</div>
							</div>
							<!--// 비밀번호 키패드 -->
						</div>
						<!--// 본문 -->
					</div>
				</div>

				<a class="btn_topmost" href="#mm_app" data-href="{ '_type': 'anchor' }" title="페이지 처음으로"><i class="mco_topmost"></i><b>TOP</b></a>
				<!-- 타임어택 윙배너 -->
				<div class="m_timedeal-wing">
					<button type="button" class="mm_switch" data-switch="{ '_isParent': true, '_defaultTitle': '펼쳐보기', '_title': '접어놓기' }" title="펼쳐보기"><b>타임어택</b></button>
					<a class="btn_timedeal" href="timeDeal.html" data-href="{ '_type': 'link' }"><b>딱!12시간만</b><i class="mco_link"></i></a>
				</div>
				<!--// 타임어택 윙배너 -->

				<!-- 현재 페이지 스크립트 -->
				<!-- <script src="../js/.js"></script> -->
				<script>
					// 키패드 숫자 랜덤생성
					function randomKey () {
						var _keyNumbers = [];
						var $keys = mm.find('.m__password-key ul li b');

						_.forEach($keys, function (__$el, __index) {

							// 숫자 중복방지
							function makeNumber () {

								var _number = Math.floor(Math.random() * $keys.length);

								if (!_keyNumbers.includes(_number)) {
									_keyNumbers[__index] = _number;
									__$el.innerText = (_number > 9) ? '' :  _number;
									return;
								}
								makeNumber();

							}
							makeNumber();

						});
					}

					mm.load(function () {

						randomKey();

						// 키패드 비밀번호 입력 체크
						var $pwBox = mm.find('.m__password-number');
						var $pwChecks = mm.find('li', $pwBox);
						var $password = mm.find('input', $pwBox)[0];
						var _pwNumbers = [];
						var _classOn = '__on';

						mm.event.on(mm.find('.m__password-key button'), 'click', function (__e) {

							__e.preventDefault();

							// 지우기
							if (this.classList.contains('btn_remove')) {
								$pwChecks[_pwNumbers.length-1].classList.remove(_classOn);
								_pwNumbers.pop();
								return;
							}

							// 전체삭제
							if (this.classList.contains('btn_remove-all')) {
								_.forEach($pwChecks, function (__$el) {

									__$el.classList.remove(_classOn);

								});
								_pwNumbers = [];
								return;
							}

							// 숫자키
							if (this.innerText !== '' && _pwNumbers.length < 6) {
								_pwNumbers.push(this.innerText);
								$pwChecks[_pwNumbers.length-1].classList.add(_classOn);
								if (_pwNumbers.length === 6) $password.value = _pwNumbers.join('');
							}

						});
					});
				</script>
			</div>
			<!--// 내용 -->
		</div>
		<!--// 화면 -->
	</div>
</body>
</html>
